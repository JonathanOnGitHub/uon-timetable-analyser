<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Timetable Load Analyser</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 40px;
    background: #f5f7fb;
}

.container {
    max-width: 900px;
    margin: auto;
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

h1 {
    margin-top: 0;
}

.dropzone {
    border: 2px dashed #4a90e2;
    padding: 30px;
    text-align: center;
    cursor: pointer;
    margin-bottom: 20px;
    border-radius: 8px;
    background: #fafcff;
}

.dropzone:hover {
    background: #f0f6ff;
}

textarea {
    width: 100%;
    height: 150px;
    margin-top: 10px;
}

button {
    margin-top: 10px;
    padding: 10px 18px;
    border: none;
    background: #4a90e2;
    color: white;
    border-radius: 6px;
    cursor: pointer;
}

button:hover {
    background: #357abd;
}

#output {
    margin-top: 20px;
    padding: 15px;
    background: #f0f4fa;
    border-radius: 6px;
}
</style>

</head>
<body>

<div class="container">

<h1>Timetable Load Analyser</h1>

<div id="dropzone" class="dropzone">
Click here to browse or drag and drop a file
<input type="file" id="fileInput" accept=".txt,.csv,.html" hidden>
</div>

<p>Or paste timetable data:</p>

<textarea id="pasteArea" placeholder="Paste timetable data here..."></textarea>

<br>
<button id="parsePasteBtn">Parse Pasted Data</button>

<div id="output"></div>

</div>

<script>

function parseContent(text) {

    const lines = text.split(/\r?\n/).filter(l => l.trim());
    const count = lines.length;

    document.getElementById('output').innerHTML =
        "<b>Lines detected:</b> " + count +
        "<br><br><pre>" +
        lines.slice(0,10).join("\n") +
        "</pre>";
}

function handleFile(file) {

    const reader = new FileReader();

    reader.onload = function(e) {
        parseContent(e.target.result);
    };

    reader.readAsText(file);
}

function parsePaste() {

    const text = document.getElementById('pasteArea').value;

    if (!text.trim()) {
        alert("No pasted data.");
        return;
    }

    parseContent(text);
}

document.addEventListener('DOMContentLoaded', function () {

    const fileInput = document.getElementById('fileInput');
    const dropzone = document.getElementById('dropzone');
    const parseBtn = document.getElementById('parsePasteBtn');

    dropzone.addEventListener('click', () => fileInput.click());

    dropzone.addEventListener('dragover', e => {
        e.preventDefault();
        dropzone.style.background = "#eef5ff";
    });

    dropzone.addEventListener('dragleave', e => {
        dropzone.style.background = "#fafcff";
    });

    dropzone.addEventListener('drop', e => {
        e.preventDefault();
        dropzone.style.background = "#fafcff";

        if (e.dataTransfer.files.length)
            handleFile(e.dataTransfer.files[0]);
    });

    fileInput.addEventListener('change', function() {
        if (this.files.length)
            handleFile(this.files[0]);
    });

    parseBtn.addEventListener('click', parsePaste);

});

</script>

</body>
</html>
